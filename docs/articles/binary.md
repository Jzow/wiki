## 二分算法

二分算法是一种在有序数组中查找某一特定元素的搜索算法。 搜索过程从数组的中间元素开始，如果中间元素正好是要查找的元素，则搜索过程结束；如果某一特定元素大于或者小于中间元素，则在数组大于或小于中间元素的那一半中查找，而且跟开始一样从中间元素开始比较。

如果在某一步骤数组为空，则代表找不到。这种搜索算法每一次比较都使搜索范围缩小一半。通俗的说，就是不断的二分两半，直到找到目标元素。

比如下面图中，我需要在 1 到 100 的数组中查找数字 63，那么首先从数组的中间元素 50 开始，如果 50 正好是 63，那么搜索过程结束，如果 50 大于 63，那么 63 只可能出现在数组的前半部分，如果 50 小于 63，那么 63 只可能出现在数组的后半部分。

![二分算法](/images/algo/binary.png)

**_事实上 50<63_**, 由此可以计算，经过最多 7 次比较，就可以找到 63。

### 查找原理思路

初始范围： 首先，整个数组初始查找范围。

第一次查找： 将数组一分为二，检查中间元素。如果中间元素是 63，则查找成功。如果 63 比中间元素小，那么继续在左半部分进行二分查找；如果 63 比中间元素大，那么在右半部分进行二分查找。

第二次查找： 如果第一次查找没有找到，再次将剩余的部分一分为二，检查中间元素。同样，如果中间元素是 63，则查找成功。如果 63 比中间元素小，继续在左半部分进行二分查找；如果 63 比中间元素大，那么在右半部分进行二分查找。

重复此过程： 持续重复这个过程，每次都将查找范围减半，直到找到数字 63 或者查找范围为空。

### 代码实现

这段代码是由 Rust 语言实现的，主要目的是呈现其算法的思想。

```rust
fn binary_search_with_count<T: Ord>(arr: &[T], target: T) -> (Option<usize>, usize) {
    let mut low = 0;
    let mut high = arr.len() - 1;
    let mut count = 0;
    while low <= high {
        count += 1;
        let mid = (low + high) / 2;
        if arr[mid] == target {
            return (Some(mid), count);
        } else if arr[mid] > target {
            high = mid - 1;
        } else {
            low = mid + 1;
        }
    }
    (None, count)
}

fn test_binary_search_63() {
    let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
               21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38,
               39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56,
               57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74,
               75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92,
               93, 94, 95, 96, 97, 98, 99, 100];
    let (result, count) = binary_search_with_count(&arr, 63);
    println!("查找数字 63 的结果数组下标是 {:?},  {} 次找到", result, count);
}

fn main() {
    test_binary_search_63();
}

```

这里输出的结果是：

```bash
查找数字 63 的结果数组下标是 Some(62),  6次就找到了
```

这里是`Some(62)`，62 是数组下标，而不是数字 63。我们可以通过大 O 表示法来计算，最多需要 7 次比较就可以找到 63。可以得到一个公式

```txt
查找次数= [log2(N)] = [log2(100)] = [6.644] = 7
```
